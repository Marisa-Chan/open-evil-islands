Evil Islands ANM file format
==============================

   * This file is part of Cursed Earth

     Cursed Earth is an open source, cross-platform port of Evil Islands
     Copyright (C) 2009-2010 Yanis Kurganov

     Permission is granted to copy, distribute and/or modify this document
     under the terms of the GNU Free Documentation License, Version 1.3
     or any later version published by the Free Software Foundation;
     with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.

     You should have received a copy of the GNU Free Documentation License
     along with this program. If not, see <http://www.gnu.org/licenses/>.

   * This is an internal documentation currently available only on Russian.
     Something more strong in English will be later.

   * Введение.
     Данная документация написана в рамках реверс-инжениринга формата ANM.
     Формат ANM - это хранилище для данных анимации (вращения, смещения и
     морфинга) одной части модели.

   * Описание.
     Сигнатуры нет, данные плотно упакованы.

     Типы:
     struct vec3 - вектор
        float x, y, z

     struct quat - кватернион
        float w, x, y, z

     Формат:
     uint32 rotation_frame_count - количество кадров анимации для вращения
     quat rotations[rotation_frame_count] - вращения

     uint32 translation_frame_count - количество кадров анимации для смещения
     vec3 translations[translation_frame_count] - смещения

     uint32 morph_frame_count - количество кадров анимации для морфинга
     uint32 morph_vertex_count - количество вершин в кадре,
                                 к которым применяется морфинг
     vec3 morphs[morph_frame_count][morph_vertex_count] - смещения

     Данные вращения и смещения присутствуют всегда. Данные морфинга могут
     отсутствовать, в этом случае morph_*_count равны нулю.

   * Пример.
     Модель: unmosu (гарпия).
     Часть: r_pereponka (перепонка).
     Местонахождение: figures.res -> unmosu.anm -> cidle -> r_pereponka.

     24
     1.000000 0.000000 0.000000 0.000000
     1.000000 0.000000 0.000000 0.000000
     1.000000 0.000000 0.000000 0.000000
     ...

     24
     0.000000 0.000000 0.000000
     0.000000 0.000000 0.000000
     0.000000 0.000000 0.000000
     ...

     24
     21
     ...
     -0.050414 -0.083977 0.125293
     -0.062090 -0.110380 0.234947
     -0.120561 -0.118982 0.325463
